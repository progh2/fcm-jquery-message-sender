<html>

<head>
    <style>
        @import url(https://fonts.googleapis.com/earlyaccess/notosanskr.css);     	
        *, span, div, label { 
            font-family: 'Noto Sans KR', sans-serif;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/skin/blue.monday/css/jplayer.blue.monday.min.css" rel="stylesheet" type="text/css" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/skin/pink.flag/css/jplayer.pink.flag.min.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/jplayer/jquery.jplayer.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jplayer/2.9.2/add-on/jquery.jplayer.inspector.min.js"></script>
               
</head>

<body>


        <form class="col s12">
            <div class="row">

                    <script>
                            $(document).ready(function () {
                                console.log("ready!");
                                
                                function sendfcm(key, topic, title, body) {
                                    var notificationData = {
                                        "to": "/topics/" + topic,
                                        "notification": {
                                            "title": title,
                                            "body": body,
                                        }
                                    }
                    
                                    $.ajax({
                                        url: 'https://fcm.googleapis.com/fcm/send',
                                        type: 'post',
                                        data: JSON.stringify(notificationData),
                                        headers: {
                                            'Content-Type': 'application/json',
                                            'Authorization': 'key=' + key
                                        },
                                        dataType: 'json',
                                        success: function (data) {
                                           console.info(data);
                                        }
                                    });
                                }
                                //sendfcm(key, 'news', '우왕', '으하하');
                                $('#sendButton').click( function(){
                                    console.log('클릭');
                                    sendfcm($('#key').val() , $('#topic').val() ,  $('#title').val(),  $('#body').val())
                                })
                            });
                    
                        </script>
                    
                        <div class="row">
                                <script type="text/javascript">
                    //<![CDATA[
                    $(document).ready(function(){
                    
                        $("#jquery_jplayer_1").jPlayer({
                            ready: function () {
                                $(this).jPlayer("setMedia", {
                                    title: "Big Buck Bunny",
                                    m4v: "/video/Big_Buck_Bunny_Trailer.m4v",
                                    ogv: "/video/Big_Buck_Bunny_Trailer.ogv",
                                    webmv: "/video/Big_Buck_Bunny_Trailer.webm",
                                    poster: "/video/Big_Buck_Bunny_Trailer_480x270.png"
                                });
                            },
                            swfPath: "../dist/jplayer",
                            supplied: "webmv, ogv, m4v",
                            size: {
                                width: "640px",
                                height: "360px",
                                cssClass: "jp-video-360p"
                            },
                            useStateClassSkin: true,
                            autoBlur: false,
                            smoothPlayBar: true,
                            keyEnabled: true,
                            remainingDuration: true,
                            toggleDuration: true
                        });
                    
                    
                        $("#jplayer_inspector").jPlayerInspector({jPlayer:$("#jquery_jplayer_1")});
                    });
                    //]]>
                    </script>
                                   <div id="jquery_jplayer_1"></div>
                                   <div id="jp_container_1" >
                                    <a href="#" class="jp-play">Play</a>
                                    <a href="#" class="jp-pause">Pause</a>
                                   </div>

                    <div class="input-field col s12">
                        <input id="key" type="text" class="validate">
                        <label for="key">서버키</label>
                    </div>
                </div>    
                <div class="row">
                        <div class="input-field col s12">
                            <input id="topic" type="text" class="validate">
                            <label for="topic">토픽</label>
                        </div>
                    </div>                        
            <div class="row">
                <div class="input-field col s12">
                    <input id="title" type="text" class="validate">
                    <label for="title">제목</label>
                </div>
            </div>
            <div class="row">
                <div class="input-field col s12">
                    <input id="body" type="text" class="validate">
                    <label for="body">내용</label>
                </div>
            </div>
            <div class="row center-align">
                    <a id="sendButton" class="waves-effect waves-light btn-large "><i class="material-icons left">send</i>보내기</a>
            </div>
            
        </form>
    </div>
</body>